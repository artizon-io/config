"$schema" = 'https://starship.rs/config-schema.json'

[aws]
disabled = true

[azure]
disabled = true

[cmd_duration]
disabled = false
min_time = 0
format = '⋅ [$duration]($style) '
style = 'bright-black bold'
show_milliseconds = false
show_notifications = false
min_time_to_notify = 45000

[package]
disabled = true

[battery]
disabled = true

[docker_context]
disabled = false
symbol = '󰡨 '
style = 'blue bold'
format = '⋅ [$symbol$context]($style) '
only_with_files = true
detect_extensions = []
detect_files = [
    'docker-compose.yml',
    'docker-compose.yaml',
    'Dockerfile',
]
detect_folders = []

[directory]
disabled = false
style = 'bright-black bold'

[git_status]
disabled = false
format = '([$all_status$ahead_behind]($style) )'
style = 'bold bright-black'
ahead = '⇡'
behind = '⇣'
stashed = ''
up_to_date = ''
diverged = 'ʏ'
conflicted = 'C'
deleted = 'D'
renamed = 'R'
modified = '!'
staged = '+'
untracked = '?'
ignore_submodules = true

[git_state]
disabled = false
rebase = 'REBASING'
merge = 'MERGING'
revert = 'REVERTING'
cherry_pick = 'CHERRY-PICKING'
bisect = 'BISECTING'
style = 'bold bright-black'
format = '([$state( $progress_current/$progress_total)]($style) )'

[git_branch]
disabled = false
format = '⋅ [$symbol$branch(:$remote_branch)]($style) '
symbol = ' '
style = 'bold blue'

[custom.kubernetes]
# This over the default k8s module
command = 'kubectl config current-context'
symbol = '󱃾 '
format = '⋅ [$symbol($output )]($style)'
style = 'bold blue'
when = 'command -v kubectl'

[python]
disabled = false
pyenv_version_name = true
pyenv_prefix = ''
format = '⋅ [${symbol}${pyenv_prefix}(${version} )]($style)[($virtualenv )](bold bright-black)'
version_format = 'v${raw}'
style = 'blue bold'
symbol = 'Python '

[rust]
disabled = false
format = '⋅ [$symbol($version )]($style)'
version_format = 'v${raw}'
symbol = 'Rust '
style = 'bold blue'
detect_extensions = ['rs']
detect_files = ['Cargo.toml']
detect_folders = []

[java]
disabled = false
format = '⋅ [$symbol($version )]($style)'
version_format = 'v${raw}'
style = 'bold blue'
symbol = 'Java '
detect_extensions = [
    'java',
    'class',
    'jar',
    'gradle',
    'clj',
    'cljc',
]
detect_files = [
    'pom.xml',
    'build.gradle.kts',
    'build.sbt',
    '.java-version',
    'deps.edn',
    'project.clj',
    'build.boot',
]
detect_folders = []

[kotlin]
disabled = false
format = '⋅ [$symbol($version )]($style)'
version_format = 'v${raw}'
symbol = 'Kotlin '
style = 'bold blue'
kotlin_binary = 'kotlin'
detect_extensions = [
    'kt',
    'kts',
]
detect_files = []
detect_folders = []

[gradle]
disabled = false
format = "⋅ [$symbol($version )]($style)"
version_format = "v${raw}"
symbol = "Gradle "
style = "blue bold"
recursive = false
detect_extensions = [
    "gradle",
    "gradle.kts",
]
detect_files = []
detect_folders = ["gradle"]


[c]
disabled = false
format = '⋅ [($name )($version )]($style)'
version_format = 'v${raw}'
style = 'blue bold'
symbol = 'C '
detect_extensions = [
    'c',
    'h',
]
detect_files = []
detect_folders = []
commands = [
    [
        'cc',
        '--version',
    ],
    [
        'gcc',
        '--version',
    ],
    [
        'clang',
        '--version',
    ],
]

[cmake]
disabled = false
format = '⋅ [$symbol($version )]($style)'
version_format = 'v${raw}'
symbol = 'CMake '
style = 'bold blue'
detect_extensions = []
detect_files = [
    'CMakeLists.txt',
    'CMakeCache.txt',
]

[golang]
disabled = false
format = '⋅ [$symbol($version )]($style)'
version_format = 'v${raw}'
symbol = 'Go '
style = 'bold blue'
detect_extensions = ['go']
detect_files = [
    'go.mod',
    'go.sum',
    'go.work',
    'glide.yaml',
    'Gopkg.yml',
    'Gopkg.lock',
    '.go-version',
]
detect_folders = ['Godeps']

[nix_shell]
disabled = false
format = '⋅ [$symbol$state( \($name\))]($style)'
symbol = 'Nix '
style = 'bold blue'
impure_msg = 'impure'
pure_msg = 'pure'

[lua]
disabled = false
format = '⋅ [$symbol($version )]($style)'
version_format = 'v${raw}'
symbol = 'Lua '
style = 'bold blue'
lua_binary = 'lua'
detect_extensions = ['lua']
detect_files = ['.lua-version']
detect_folders = ['lua']

[nodejs]
disabled = false
format = '⋅ [$symbol($version )]($style)'
version_format = 'v${raw}'
symbol = 'Node '
style = 'bold blue'
detect_extensions = [
    'js',
    'mjs',
    'cjs',
    'ts',
    'mts',
    'cts',
]
detect_files = [
    'package.json',
    '.node-version',
    '.nvmrc',
]
detect_folders = ['node_modules']

[swift]
disabled = false
format = '⋅ [$symbol($version )]($style)'
version_format = 'v${raw}'
symbol = 'Swift '
style = 'bold blue'
detect_extensions = ['swift']
detect_files = ['Package.swift']
detect_folders = []

[ruby]
disabled = false
format = '⋅ [$symbol($version )]($style)'
version_format = 'v${raw}'
symbol = 'Ruby '
style = 'bold blue'
detect_extensions = ['rb']
detect_files = [
    'Gemfile',
    '.ruby-version',
]
detect_folders = []
detect_variables = [
    'RUBY_VERSION',
    'RBENV_VERSION',
]

[zig]
disabled = false
format = '⋅ [$symbol($version )]($style)'
version_format = 'v${raw}'
symbol = 'Zig '
style = 'bold blue'
detect_extensions = ['zig']
detect_files = []
detect_folders = []

# https://starship.rs/config/#custom-commands
# https://github.com/starship/starship/discussions/1252

[custom.osx]
command = 'arch'
symbol = ' '
format = '⋅ [$symbol($output )]($style)'
style = 'bold bright-black'
when = '[[ "$(uname)" == "Darwin" ]]'

[custom.linux]
command = 'arch'
symbol = ' '
format = '⋅ [$symbol($output )]($style)'
style = 'bold bright-black'
when = '[[ "$(uname)" == "Linux" ]]'

[custom.ssh_remote_conn]
description = "show number of remote ssh connections"
command = "w -h | awk '{print $6}' | grep 'sshd' | wc -l"
when = "w -h | awk '{print $6}' | grep 'sshd' | wc -l | xargs -I{} -- test {} -gt 0"
symbol = "SSH "
format = '⋅ [$symbol($output )]($style)'
style = "bold grey"
